<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Automated Explosive Facility Siting Form</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.css"/>
  <link rel="stylesheet" href="styles.css" />

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet-geosearch@3.11.0/dist/geosearch.umd.js"></script>
</head>
<body>
  <h2>PROFORMA FOR SITING OF NEW EXPLOSIVE FACILITIES</h2>
  <p style="text-align: center;">(Use separate form for each building) </p>

  <div class="section">
    <h3>Proposed Building (X) Details</h3>
    <div class="inline-group">
        <div>
            <label>1. Proposed Bldg No. / Name </label>
            <input type="text" id="proposedBldgName" placeholder="e.g., Magazine-01">
        </div>
        <div>
            <label>Set Location of Proposed Building (X)</label>
            <button type="button" class="map-btn" id="setProposedLocationBtn">Set on Map</button>
            <div id="proposedCoordDisplay" class="coord-display"></div>
        </div>
    </div>
     <div class="inline-group">
        <div>
            <label>2. Building Type (e.g., ESH, Igloo) </label>
            <select id="buildingType">
                <option value="">Select Type</option>
                <option value="ESH">ESH</option>
                <option value="Igloo">Igloo</option>
                <option value="Bunker">Bunker</option>
                <option value="Process">Process</option>
            </select>
        </div>
        <div>
            <label>3. NEC of Proposed Building (kg)</label>
            <input type="text" id="proposedBldgNec" placeholder="e.g., 500">
        </div>
    </div>
    <div class="inline-group">
       <div>
            <label>4. Storage or Process Building </label>
            <select id="buildingUse">
              <option value="">Select Use</option>
              <option value="Storage">Storage</option>
              <option value="Process">Process</option>
            </select>
        </div>
        <div>
            <label>5. Hazard Division</label>
            <input type="text" id="proposedBldgHazardDiv" placeholder="e.g., 1.1">
        </div>
    </div>
  </div>

  <div class="section">
    <label>6. SIQD/PIQD from Proposed Building to Surrounding Buildings </label>
    <table id="proposedToSurroundingTable">
      <thead>
        <tr>
          <th>(a)<br>Proposed Bldg No. </th>
          <th>(b)<br>Surrounding Bldg (Y) No. </th>
          <th colspan="2">(c)<br>QD Required (m) </th>
          <th>(d)<br>Distance Available (m) </th>
          <th>(e)<br>Remarks </th>
        </tr>
        <tr>
          <th></th>
          <th></th>
          <th>SIQD</th>
          <th>PIQD</th>
          <th></th>
          <th></th>
        </tr>
      </thead>
      <tbody id="proposedToSurroundingTable-body">
        </tbody>
    </table>
    <button id="addSurroundingBtn">‚ûï Add Surrounding Building</button>
  </div>

  <div class="section">
      <label>7. SIQD/PIQD from Surrounding Buildings to Proposed Building </label>
      <table id="surroundingToProposedTable">
          <thead>
              <tr>
                  <th>(a)<br>Surrounding Bldg (Y) No. </th>
                  <th>(b)<br>NEC of Y (kg) </th>
                  <th>(c)<br>Use Type</th>
                  <th>(d)<br>Hazard Div. of Y </th>
                  <th colspan="2">(e)<br>QD Required by Y (m) </th>
                  <th>(f)<br>Distance Available (m) </th>
                  <th>(g)<br>Remarks </th>
              </tr>
              <tr>
                  <th></th><th></th><th></th><th></th><th>SIQD</th><th>PIQD</th><th></th><th></th>
              </tr>
          </thead>
          <tbody id="surroundingToProposedTable-body">
              </tbody>
      </table>
  </div>

  <div class="section" id="violationSummarySection" style="display: none;">
      <h3 class="warning-title">‚ö†Ô∏è Safety Distance Violation Summary</h3>
      <table id="violationSummaryTable">
          <thead>
              <tr>
                  <th>Violating Pair</th>
                  <th>Required Distance (m)</th>
                  <th>Available Distance (m)</th>
                  <th>Shortfall (%)</th>
                  <th>Suggestions</th>
              </tr>
          </thead>
          <tbody id="violationSummaryTable-body">
              </tbody>
      </table>
  </div>


  <button onclick="window.print()">üñ®Ô∏è Print Page</button>

  <div id="mapModal" class="modal">
    <div class="modal-content">
      <h3>Select Location on Map</h3>
      <div id="map"></div>
      <button id="confirmLocationBtn">Confirm Location</button>
      <button id="cancelModalBtn" style="background-color:#6c757d;">Cancel</button>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>